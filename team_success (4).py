import streamlit as st
import random
from collections import Counter

# --- –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ ---
# (–û—Å—Ç–∞–≤–ª–µ–Ω–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

def success_level(team, selected_events, expectation, deadline):
    # ... (–ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–æ–≤ –æ—Å—Ç–∞–ª–∞—Å—å –ø—Ä–µ–∂–Ω–µ–π)
    # (—Ç–æ—Ç –∂–µ –±–ª–æ–∫, –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ–º –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ç–∏)
    return result, probability, comments

# --- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Streamlit ---

st.title("–ü—Ä–æ–≥–Ω–æ–∑ —É—Å–ø–µ—Ö–∞ –∫–æ–º–∞–Ω–¥—ã")
st.subheader("–î–æ–±–∞–≤—å—Ç–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –æ–∂–∏–¥–∞–Ω–∏—è –∏ –≤–Ω–µ—à–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è")

team = []
deadline = st.selectbox("–°—Ä–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞/–ø—Ä–æ–¥—É–∫—Ç–∞", ["", "1 –º–µ—Å—è—Ü", "3 –º–µ—Å—è—Ü–∞", "6 –º–µ—Å—è—Ü–µ–≤", "1 –≥–æ–¥"], help="–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–æ–¥–∏—Ç—Å—è –∫–æ–º–∞–Ω–¥–µ –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.")
expectation = st.selectbox("–¢–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞", ["", "–§–∏—á–∞", "MVP", "–ö–æ–Ω—Ü–µ–ø—Ç", "–ì–æ—Ç–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç"], help="–ö–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–∂–∏–¥–∞–µ—Ç—Å—è –æ—Ç –∫–æ–º–∞–Ω–¥—ã.")

external_events = [
    "–∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏",
    "—É—Ö–æ–¥–∏—Ç –∫–ª—é—á–µ–≤–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫",
    "–Ω–µ–ø–æ–Ω—è—Ç–Ω–∞—è —Ü–µ–ª—å",
    "–±–æ—Ä—å–±–∞ –¥–≤—É—Ö –ª–∏–¥–µ—Ä–æ–≤",
    "–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ –æ—Ç QA",
    "–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–¥–±–µ–∫ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
    "–ø–µ—Ä–µ–≥—Ä—É–∑ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏",
    "–Ω–µ—Ç –º–æ—Ç–∏–≤–∞—Ü–∏–∏",
    "—Å–∏–ª—å–Ω–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è",
    "–∏–≥–Ω–æ—Ä –≤ —á–∞—Ç–µ"
]
selected_events = st.multiselect("–í–Ω–µ—à–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è", external_events, help="–°–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É –∫–æ–º–∞–Ω–¥—ã.")

num_members = st.number_input("–°–∫–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –∫–æ–º–∞–Ω–¥–µ?", min_value=1, max_value=20, value=5)

roles = ["Product Owner", "Project Manager", "Tech Lead", "Business Analyst", "System Analyst", "Developer", "QA"]
skill_levels = ["junior", "middle", "senior", "–Ω–µ–∞–¥–µ–∫–≤–∞—Ç–µ–Ω"]
behavior_types = ["–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω—ã–π", "—Ñ–ª–µ–≥–º–∞—Ç–∏—á–Ω—ã–π", "–æ–ø–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π", "—Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π", "–º–æ–ª—á–∞–ª–∏–≤—ã–π"]
motivations = ["–≤—ã—Å–æ–∫–∞—è", "—Å—Ä–µ–¥–Ω—è—è", "–Ω–∏–∑–∫–∞—è"]

st.markdown("**–£—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥—ã:**")
st.markdown("| –†–æ–ª—å ‚ÑπÔ∏è | –ù–∞–≤—ã–∫ ‚ÑπÔ∏è | –ü–æ–≤–µ–¥–µ–Ω–∏–µ ‚ÑπÔ∏è | –ú–æ—Ç–∏–≤–∞—Ü–∏—è ‚ÑπÔ∏è |")
st.markdown("|---------|------------|---------------|----------------|")

for i in range(int(num_members)):
    cols = st.columns(4)
    with cols[0]:
        role = st.selectbox("", roles, key=f"role_{i}", help="–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç.–ø.")
    with cols[1]:
        skill = st.selectbox("", skill_levels, key=f"skill_{i}", help="–£—Ä–æ–≤–µ–Ω—å –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏: –æ—Ç junior –¥–æ senior –∏–ª–∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫.")
    with cols[2]:
        behavior = st.selectbox("", behavior_types, key=f"beh_{i}", help="–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ —Ä–∞–±–æ—Ç–µ.")
    with cols[3]:
        motivation = st.selectbox("", motivations, key=f"mot_{i}", help="–ú–æ—Ç–∏–≤–∞—Ü–∏—è –∏ –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –ø—Ä–æ–µ–∫—Ç.")
    team.append({"role": role, "skill": skill, "behavior": behavior, "motivation": motivation})
    st.markdown("---")

if st.button("–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"):
    result, probability, comments = success_level(team, selected_events, expectation, deadline)
    st.markdown(f"### üß† –ü—Ä–æ–≥–Ω–æ–∑: **{result}**")
    st.markdown(f"#### üî¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞: **{probability}%**")
    if comments:
        st.markdown("#### üìå –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:")
        for comment in comments:
            st.markdown(f"- {comment}")
